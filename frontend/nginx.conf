server {
    listen       80;
    server_name  localhost;

    # Serve static files for candidates with proper MIME types (must come before other locations)
    location /test.css {
        alias   /usr/share/nginx/html/candidate_1/style.css;
        default_type text/css;
    }
    
    location /candidate_1/style.css {
        alias   /usr/share/nginx/html/candidate_1/style.css;
        default_type text/css;
    }
    
    location /candidate_1/timeline.js {
        alias   /usr/share/nginx/html/candidate_1/timeline.js;
        default_type application/javascript;
    }

    # Default to candidate
    location / {
        root   /usr/share/nginx/html/candidate;
        index  index.html index.htm;
        try_files $uri $uri/ /index.html;
    }

    # Allow access to candidate versions for development
    location /candidate_1_1/ {
        alias   /usr/share/nginx/html/candidate_1_1/;
        index  index.html index.htm;
        try_files $uri $uri/ /index.html;
    }

    location /candidate_1_2/ {
        alias   /usr/share/nginx/html/candidate_1_2/;
        index  index.html index.htm;
        try_files $uri $uri/ /index.html;
    }

    location /candidate_1_3/ {
        alias   /usr/share/nginx/html/candidate_1_3/;
        index  index.html index.htm;
        try_files $uri $uri/ /index.html;
    }

    location /candidate_1_4/ {
        alias   /usr/share/nginx/html/candidate_1_4/;
        index  index.html index.htm;
        try_files $uri $uri/ /index.html;
    }

    location /candidate_1_5/ {
        alias   /usr/share/nginx/html/candidate_1_5/;
        index  index.html index.htm;
        try_files $uri $uri/ /index.html;
    }

    location /candidate_2_1/ {
        alias   /usr/share/nginx/html/candidate_2_1/;
        index  index.html index.htm;
        try_files $uri $uri/ /index.html;
    }

    location /candidate_2_2/ {
        alias   /usr/share/nginx/html/candidate_2_2/;
        index  index.html index.htm;
        try_files $uri $uri/ /index.html;
    }

    location /candidate_2_3/ {
        alias   /usr/share/nginx/html/candidate_2_3/;
        index  index.html index.htm;
        try_files $uri $uri/ /index.html;
    }

    location /candidate_2_4/ {
        alias   /usr/share/nginx/html/candidate_2_4/;
        index  index.html index.htm;
        try_files $uri $uri/ /index.html;
    }

    location /candidate_2_5/ {
        alias   /usr/share/nginx/html/candidate_2_5/;
        index  index.html index.htm;
        try_files $uri $uri/ /index.html;
    }

    location /candidate_3_1/ {
        alias   /usr/share/nginx/html/candidate_3_1/;
        index  index.html index.htm;
        try_files $uri $uri/ /index.html;
    }

    location /candidate_3_2/ {
        alias   /usr/share/nginx/html/candidate_3_2/;
        index  index.html index.htm;
        try_files $uri $uri/ /index.html;
    }

    location /candidate_3_3/ {
        alias   /usr/share/nginx/html/candidate_3_3/;
        index  index.html index.htm;
        try_files $uri $uri/ /index.html;
    }

    location /candidate_3_4/ {
        alias   /usr/share/nginx/html/candidate_3_4/;
        index  index.html index.htm;
        try_files $uri $uri/ /index.html;
    }

    location /candidate_3_5/ {
        alias   /usr/share/nginx/html/candidate_3_5/;
        index  index.html index.htm;
        try_files $uri $uri/ /index.html;
    }

    location /candidate_3_6/ {
        alias   /usr/share/nginx/html/candidate_3_6/;
        index  index.html index.htm;
        try_files $uri $uri/ /index.html;
    }

    location /candidate_3_7/ {
        alias   /usr/share/nginx/html/candidate_3_7/;
        index  index.html index.htm;
        try_files $uri $uri/ /index.html;
    }

    location /candidate_3_8/ {
        alias   /usr/share/nginx/html/candidate_3_8/;
        index  index.html index.htm;
        try_files $uri $uri/ /index.html;
    }

    location /candidate_3_9/ {
        alias   /usr/share/nginx/html/candidate_3_9/;
        index  index.html index.htm;
        try_files $uri $uri/ /index.html;
    }

    location /candidate_3_10/ {
        alias   /usr/share/nginx/html/candidate_3_10/;
        index  index.html index.htm;
        try_files $uri $uri/ /index.html;
    }

    location /candidate_3_11/ {
        alias   /usr/share/nginx/html/candidate_3_11/;
        index  index.html index.htm;
        try_files $uri $uri/ /index.html;
    }

    location /candidate_3_12/ {
        alias   /usr/share/nginx/html/candidate_3_12/;
        index  index.html index.htm;
        try_files $uri $uri/ /index.html;
    }

    location /candidate_3_13/ {
        alias   /usr/share/nginx/html/candidate_3_13/;
        index  index.html index.htm;
        try_files $uri $uri/ /index.html;
    }

    location /candidate_3_14/ {
        alias   /usr/share/nginx/html/candidate_3_14/;
        index  index.html index.htm;
        try_files $uri $uri/ /index.html;
    }

    location /candidate_3_15/ {
        alias   /usr/share/nginx/html/candidate_3_15/;
        index  index.html index.htm;
        try_files $uri $uri/ /index.html;
    }

    # Low-precision event handling candidates
    location /candidate_1/ {
        alias   /usr/share/nginx/html/candidate_1/;
        try_files $uri /candidate_1/index.html;
    }

    location /candidate_2/ {
        alias   /usr/share/nginx/html/candidate_2/;
        try_files $uri /candidate_2/index.html;
    }

    # Serve the main `candidate` directory correctly so static assets
    # like /candidate/timeline.js and /candidate/style.css are returned
    # with the proper MIME types instead of falling back to index.html.
    location /candidate/ {
        root /usr/share/nginx/html;
        try_files $uri $uri/ /candidate/index.html;
    }

    location /candidate_3/ {
        alias   /usr/share/nginx/html/candidate_3/;
        try_files $uri /candidate_3/index.html;
    }

    location /candidate_4/ {
        alias   /usr/share/nginx/html/candidate_4/;
        try_files $uri /candidate_4/index.html;
    }

    location /candidate_5/ {
        alias   /usr/share/nginx/html/candidate_5/;
        try_files $uri /candidate_5/index.html;
    }

    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   /usr/share/nginx/html;
    }
}
